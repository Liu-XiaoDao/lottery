<% provide :c_active, "users" %>
<%= render 'shared/navigation' %>

<!-- 添加弹框 -->
<div class="uk-alert" data-uk-alert="">
  <button class="uk-button uk-button-primary uk-margin-left" data-uk-modal="{target:'#create'}">添加</button>
  <button disable="disable" class="uk-button uk-button-primary uk-margin-left">报名总数: <%= User.count %></button>
</div>
<div id="create" class="uk-modal" aria-hidden="true" style="display: none; overflow-y: scroll;">
  <div class="uk-modal-dialog">
    <button type="button" class="uk-modal-close uk-close"></button>
    <div class="uk-modal-header">
      <h2>添加</h2>
    </div>
    <%= form_for User.new, url: admin_create_users_path do |f| %>
      <div>
        <div class="uk-margin-small-top uk-modal-content uk-form">
          <div class="uk-form-row">
            <label class="uk-form-label" for="">工牌号:</label>
            <div class="uk-form-controls">
              <span class="id-pre uk-width-1-5">
                <select id="pre" name="user[pre]">
                  <option value="YKSW-">YKSW-</option>
                  <option value="XXX-">XXX-</option>
                </select>
              </span>
              <input type="number" id="id" value="" name="user[attendance]" class="uk-width-4-5" placeholder="请输入工牌号码">
            </div>
          </div>
          <div class="uk-form-row">
            <label class="uk-form-label" for="">姓名:</label>
            <div class="uk-form-controls">
              <input type="text" id="username" value="" name="user[username]" class="uk-width-1-1" placeholder="请输入你的真实姓名">
            </div>
          </div>
          <div class="uk-form-row">
            <label class="uk-form-label" for="">手机号码:</label>
            <div class="uk-form-controls">
              <input type="number" id="phone" value="" name="user[phone]" class="uk-width-1-1" placeholder="请输入你的手机号码">
            </div>
          </div>
        </div>
      </div>
      <div class="uk-modal-footer uk-text-right">
        <button type="button" class="uk-button uk-modal-close">Cancel</button>
        <button type="submit" class="uk-button uk-button-primary">Save</button>
      </div>
    <% end %>
  </div>
</div>

<% if @users.present? %>
  <table class="uk-table uk-table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>姓名</th>
        <th>年龄</th>
        <th>性别</th>
        <th>手机号码</th>
        <th>学历</th>
        <th>爱好</th>
        <th>修改</th>
        <th>删除</th>
      </tr>
    </thead>
    <% @users.each do |user| %>
      <tr <%= "class=uk-form-danger" if user.is_attendance == "不参加" %> >
      	<td><%= user.id %></td>
      	<td><%= user.name %></td>
      	<td><%= user.age %></td>
      	<td><%= user.pre %></td>
      	<td><%= user.phone %></td>
      	<td><%= user.attendance %></td>
        <td><%= user.notes %></td>
        <td><%= link_to '修改', edit_user_path(user) %></td>
      	<td><a data-confirm="你确定要删除吗?" href="/users/delete?id=<%=user.id%>">删除</a></td>
      </tr>
    <% end %>
  </table>
  <%= will_paginate @users, renderer: WillPaginate::ActionView::BlogLinkRenderer %>
<% end %>
